- pipeline: Publish main version
  refs:
  - refs/heads/main
  fail_on_prepare_env_warning: true
  actions:
  - action: Install packages
    type: BUILD
    docker_image_name: library/node
    docker_image_tag: 22
    execute_commands:
    - pnpm i
    setup_commands:
    - npm i pnpm -g
    volume_mappings:
    - /:/buddy/visual-service-cli
    shell: BASH
  - action: Lint
    type: BUILD
    docker_image_name: library/node
    docker_image_tag: 22
    execute_commands:
    - pnpm run lint
    setup_commands:
    - npm i pnpm -g
    volume_mappings:
    - /:/buddy/visual-service-cli
    shell: BASH
  - action: Build
    type: BUILD
    docker_image_name: library/node
    docker_image_tag: 22
    execute_commands:
    - pnpm run build
    setup_commands:
    - npm i pnpm -g
    shell: BASH
  - action: Publish
    type: BUILD
    docker_image_name: library/node
    docker_image_tag: 22
    execute_commands:
    - pnpm publish --no-git-checks --access public
    setup_commands:
    - npm i pnpm -g
    volume_mappings:
    - /:/buddy/visual-service-cli
    shell: BASH
